<!DOCTYPE html>
<html>
<head>
    <title>Retirement Calculator</title>
    <script>
        // Assuming the esctBrackets are defined somewhere in the code
        let esctBrackets = [
            {threshold: 14000, rate: 10}, // Example brackets
            {threshold: 48000, rate: 20},
            {threshold: Infinity, rate: 30}
        ];

        function computeEsctRate(annualIncome) {
            for (let i = 0; i < esctBrackets.length; i++) {
                if (annualIncome < esctBrackets[i].threshold) {
                    return esctBrackets[i].rate;
                }
            }
            return 0; // Default if no brackets match
        }

        function calculateEmployerContribution(grossContribution, annualIncome, fiscalDrag) {
            let esctRate = fiscalDrag ? 0 : computeEsctRate(annualIncome);
            return grossContribution * (1 - esctRate / 100);
        }

        // Example function calls to show the updates
        function onCalculate() {
            let grossContribution = 1000; // Example gross contribution
            let annualIncome = 40000; // Example annual income input
            let fiscalDrag = false; // Example fiscalDrag input
            let finalContribution = calculateEmployerContribution(grossContribution, annualIncome, fiscalDrag);
            console.log('Final Employer Contribution after ESCT:', finalContribution);
        }
    </script>
</head>
<body>
    <!-- UI Elements for input and display would go here -->
    <button onclick="onCalculate()">Calculate</button>
</body>
</html>